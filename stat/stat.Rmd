---
title: '意思決定のための、ゼロからはじめる統計とデータ分析のお話'
author: '石井 遼介 / @ryouen'
date: "March 8, 2019"
output:
  bookdown::gitbook: default
  html_document:  
    latex_engine: xelatex
    df_print: paged
    toc: true
    toc_float: true
    toc_depth: '2'
  pdf_document:
#    latex_engine: xelatex
    df_print: kable
    number_sections: yes
    toc: no
    toc_depth: 
output_file: "index.html"
fontsize: 11pt
#bibliography: mybibfile.bib
mainfont: Meiryo
monofont: Meiryo
---


```{r include=FALSE}
#install.packages("bookdown")
#install.packages("rmarkdown")
#install.packages("knitr")
#install.packages("devtools", dependencies = TRUE)
#install.packages("reticulate") #このパッケージを使うと、'''{python} チャンクでPythonを実行する時、チャンクをまたいだ処理も可能になる
#devtools::install_github("rstudio/rmarkdown")
library(bookdown)
library(rmarkdown)
library(knitr)
library(reticulate)
```

```{r include=FALSE}
#install.packages("dplyr")
library(dplyr)
library(ggplot2)
```


#index{-}
このページでは「意思決定のためのデータ分析」入門編として、機械学習をやってみたい、AI入門したい、あるいは、統計をゼロから学びたい、という方のために、統計やデータ分析の基礎を、**わかりやすく、けれど、本質を損なわないように**お伝えしていきます。

データ分析と統計の基礎を学ぶことで、
 - 未来を予測し、自分や相手、顧客の行動を制御する
 - いま、何が起きているのか。起きていることから、真実に迫る構造を抽出する
ことが上達します。

筆者は、

 - 慶應義塾大学 システムデザイン・マネジメントで行動科学の研究を行う、日常的にデータ分析を行う研究者であるとともに、
 - ビジネスと経営のフィールドでも多くの提案を通し、人生の時間を賭けるに値すると感じる、様々なプロジェクトを実現してきました。
 - 難しい行動科学の内容を一般向けにわかりやすく記載した「悩みにふりまわされて しんどいあなたへ」の著書があります。

また、統計やデータサイエンスまわりでは

 - 東京大学工学部で、卒論で三次元データを取り扱った
 - シンガポール国立大学のMBAプログラムで、Overallの成績4.7/5.0
 - MITのオンラインプログラムData Analysis for Social Scientistsにて、Student TAとして選ばれる。
 - New York Universityで Data Science for Businesを教えるProvost先生/統計の専門家Simonoff先生に師事
 などのバックグラウンドがあります。


筆者はRとPythonを使いますが、[こちらのGithubのリポジトリに利用するファイルをすべて置いて](https://github.com/ryouen/ryouen.github.io/tree/master/stat)おきます。環境構築には、Rは[R 3.5.2](https://cran.r-project.org/src/base/R-3) と、[RStudio](https://www.rstudio.com/products/rstudio/download/)、Pythonは[Anaconda](https://www.anaconda.com/distribution/)のJupyter Notebookを使っています。

```{r include=FALSE}
scatter <- ggplot(data=iris, aes(x = Sepal.Length, y = Sepal.Width)) 
scatter + geom_point(aes(color=Species, shape=Species)) +
  xlab("Sepal Length") +  ylab("Sepal Width") +
  ggtitle("Sepal Length-Width")
```


###対象読者{-}
 - 手元にあるデータから「真実」を見つけ出したい人
 - これから統計に入門するヒト。機械学習とかAIとかの入り口にたった人
 - 研究者で統計パッケージを使って分析ができるが「自分が本当には、何をしているのか？」を知りたい人
 - p値が5%以下になったら、やったー！となる人
 - とりあえず、anova()したらいいんでしょ、って思ってる人
 - 統計を、楽しく、わかりやすく、理解したい人！
 - 意思決定にデータを活かしたい人。データサイエンスに入門したい人

###数式はこわくない{-}
この統計分析では「数式」を使います。
数式について、苦手意識がある方は、この章をこのまま読み進めてから、本題に入ってください。
数式に苦手意識などないよ、という方は、早速第１章から入っていきましょう。

###数式は「ラク」をするためにある{-}
統計を学ぶ上で、「数式」は避けられません。
数式というと、苦手、難しそう、なんなら「得体が知れなくて怖い！」という方もいらっしゃるかもしれません。
しかし、数式は、実は「ラクをするために」あるのです、と言ったら、驚かれるでしょうか？

例えば、もしあなたが数式が苦手なら、

\[
  \sum_{x=1}^{5} x
\]


みたいなのは、できれば見たくないですよね。


ではぎゃくに、こういうのを見るとどうでしょう？
\[
いち　たす　に　たす　さん　たす　よん　たす　ご
\]

さすがに、

\[
1+2+3+4+5
\]
と書いてよね、まどろっこしいなあ。などと、思われるのではないでしょうか。


**実は、本質的には、すべての数学の記号は、これと同じ。長い言葉を省略しているに過ぎません。**


###難しいのではなく、知らない{-}

だから、数式を見たら、一度それを「日本語へ翻訳」してみてください。
たとえば、先程みた

\[
  \sum_{x=1}^{5} x
\]
この数式は、
\[
1から5まで、順番に足していって。つまり、1+2+3+4+5をして！
\]

という「日本語へ翻訳」できます。

日本語へ翻訳できないこ時、それは
**数式が難しいのではなく、あなたがその数式を知らないだけ**なのです。
知識がない時、必要なのは落ち込むことではなく、調べることです。知ることです。

もっと言えば、**大事なことは「数式に慣れる」こと**です。
わたしたちは、本当にはよく分からなくても、見慣れているものを「わかる」と思う生き物です。

例えば、いつも使っている携帯電話は、統計で学ぶひとつひとつの数式に比べると、
高度なテクノロジーの塊で、とても難しいはずです。

けれど「なぜ、そのボタンを押すと、遠く離れたヒトと話ができるという、魔術的なことが起きるのか？？う～～ん、まったくわからん。俺は頭が悪いのだろうか。。」と落ち込むことなどなく、自然に使いこなしているはずです。

数式は、むしろ「語学」だと思って、むかし英語の単語帳を何度も見て覚えたように、
そして今では「Pen」という単語を見ると、「なんだっけ、えーと、確か、ペンだな」などと思うことなく、
「Pen」が指し示すものを、１秒のタイムラグもなく理解できるように、
統計の数式にも、時間をかけて、何度も見て、慣れていくことが大切です。

新しい英単語を、一度見てすぐに使えるようにならないのと同じように、
新しい数式に、時間をかけて慣れ親しんでいきましょう。


#回帰分析(Regression)とは

回帰(Regression)とは、**1つの興味がある、理解したいデータ(目的変数/Target)**を、
他のいくつかの、よくわかっているパラメーターで説明することです。


[Handbook of Regression Analysis](https://amzn.to/2Tsa6yd) を書いたNew York UniversityのProf.Simonoff Jeffreyは、
**「回帰は、いまのところ、人類が持てる最高のデータ分析ツールだ」**
(Regression is by far in a way most useful Data Analytic method than every data mining method ever invented)
と言いました。

これは、回帰分析だけが、次の３つのことができるからです。

- 1.Prediction: 観察できていないものの予測/時間的な予測(未来予測)

- 2.Model building: 関係(relationship of variables)を理解するため(これを増やすと、売上が上がる)

- 3.Testing Hypothesis: 仮説を確認(test)するため

予測だけや、モデルづくりだけができるメソッドは他にもありますが、
回帰だけが、これら３つを同時に満たすのです。

それでは、回帰分析の中でも一番シンプルな回帰、線形回帰分析を
次の章からはじめましょう。


#線形回帰分析 - Linear Regression


>All model is wrong but some are useful. Model is a representation of truth.
>It is not actually the truth.
>We are assuming reasonable representation.


「線形」回帰分析、あるいは、Simple Regressionをするとき、たとえば身長と体重、人口密度と犯罪率、父親の身長と息子の身長、マーケティング予算と売上など、
２つの要素 - 「変数」と呼び、それぞれ$x, y$で表現することが多いのですが、その関係に興味があります。

$y$ を興味のある変数、より理解したい変数とし、つまり、target variable, (ターゲット・目的変数)と呼びます。

この$y$を、$x$ を使って予測したり分析したり説明したりするので、$x$を説明変数(predictor, predicting variableと呼びます。


例えば、あなたがマーケティングの責任者であれば、マーケティング予算が、説明変数$x$、それによって予測する売上が、目的変数$y$ということになります。これは、マーケティング予算は適切な権限があれば、決めることができる(操作可能)ですが、売上は結果に過ぎないため、売上を直接コントロールすることはできないからです。


また、もし「どこに住もうかな」とあなたが考えているとすると、
人口密度が説明変数 $x$ で、犯罪率が目的変数 $y$ だということになります。
住む場所、つまり人口密度はこれから選ぶことができますが、犯罪率自体はコントロールできないからです。


このように、$x$ によって説明する、$y$ の変化を知ること、しかも、シンプルに直線で知ることを、
「線形回帰分析」といいます。




```{r include=FALSE}
#install.package("UsingR")
library(UsingR)
data(fater.son)
```

```{r}
plot(sheight ~ fheight, data=father.son,bty="l",pch=20)
```


\[
y_i = \beta_0 + \beta_1 x_{i} + \epsilon_i
\]



##回帰分析とは



##線形回帰




#重回帰分析
回帰分析について学んでいきましょう！！



#統計デモ


#参考文献

 - STAT-GB/2301 by Jeffrey S. Simonoff in New York University
 

