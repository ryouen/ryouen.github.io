---
title: 'R markdown を日本語でpdf/html出力'
author: 'Ryosuke ISHII'
date: "March 8, 2019"
output:
  html_document:  
#    latex_engine: xelatex
    df_print: paged
    toc: no
    toc_depth: '2'
  pdf_document:
#    latex_engine: xelatex
    df_print: kable
    number_sections: yes
    toc: no
    toc_depth: 2
fontsize: 11pt
#bibliography: mybibfile.bib
mainfont: Meiryo
monofont: Meiryo
---

# all in one の分析スタイルを。
##前提となる環境
- Windows 10
- Rstudio ユーザー
- 日本語で書きたい

## なぜやるのか
多くのレポートや論文等では、「その場限りのデータ解析」と、「その場限りの解析結果に基づく考察」が書かれています。
その場限りというのは、例えば「Excelで分析する」「分析結果をグラフに表示する」「グラフをパワポに貼る」ということや、
「R でコードを書いていろいろと分析をして、グラフやテーブルを出力する」「ワードにコピペして、論文をつくる」といった使い方のことです。

ここでは、解析とレポートを同時に行う、Rnotebookの使い方を記載します。
Pythonユーザにおける、Jupyter Notebookに近いものだと考えていただければ大丈夫です。


## インストール等
[R](https://cran.r-project.org/bin/windows/base/)をインストール  
[Rstudio](https://www.rstudio.com/)をインストール  
[MiKTeX](https://miktex.org/download)をインストールする。Basicはだめで、Full版をインストールする必要がある。インストール後コンソールから、Update=>Check for updateですべてアップデートしておく。また、mathspecがあるかどうかをPackages で確認し、なければインストール。


## Test Run
ここまでできれば、RStudioを開いて、File => New File => R Notebook します。
記載のとおり、Ctrl + Shift + K すれば、Rmarkdownという言語で書かれたファイルが、HTML形式でアウトプットされます。


## Rmarkdownについて簡単に

Rstudioで、 Ctrl + Alt + I すると、バックグラウンドが灰色の、Rのプログラミングコードを書けるエリアが出現します。
これを「チャンク/Chunk」と呼びます。
ここに、コードを記載することができます。それ以外のエリアは、Rmarkdown形式で(pandoc markdown形式で)記載します。  
  

これらにより、R markdown形式で装飾されたレポートと、Rのコードの実行結果を、同じファイル内で同居させることがでできます。


最終的に(renderingされ)出力される文章では、当該コードの直後に、実行結果が表示され、これによって、「解析結果のグラフ」と「どのようにその解析を行ったかのコード」を同居されることができるわけです。また、レポートの際にコード自体が不要なときは、

'''
{r include=FALSE}
'''
というオプションを入れることで、コードを非表示にすることができます。


##yamlの設定




```{r}
#install.packages("bookdown")
#install.packages("markdown")
#install.packages("rmarkdown")
#install.packages("knitr")
library(bookdown)
library(markdown)
library(rmarkdown)
library(knitr)
```


```{r include=FALSE}
#install.packages(c("reshape2", "ggplot2", "e1071"))
library(knitr)
library(ggplot2)
library(reshape2)
opts_chunk$set(echo=FALSE, cache=TRUE, message=FALSE)
options(width = 1000)
```


This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

```{r}
plot(cars)
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.
